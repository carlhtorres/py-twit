py-twit:
  build: ./application
  dockerfile: Dockerfile
  environment:
    - "API_KEY=${API_KEY}"
    - "API_KEY_SECRET=${API_KEY_SECRET}"
    - "ACCESS_TOKEN_KEY=${ACCESS_TOKEN_KEY}"
    - "ACCESS_TOKEN_SECRET=${ACCESS_TOKEN_SECRET}"
  ports:
    - "8000:8000"
  links:
    - filebeat
  labels:
    - app

elasticsearch:
  image: docker.elastic.co/elasticsearch/elasticsearch:7.6.2
  ports:
    - "9200:9200"
    - "9300:9300"
  environment:
    - discovery.type=single-node
  labels:
    - logs

filebeat:
  image: docker.elastic.co/beats/filebeat:7.6.2
  environment:
    - setup.kibana.host=kibana:5601
    - output.elasticsearch.hosts=["elasticsearch:9200"]
  links:
    - elasticsearch
    - kibana
  labels:
    - logs

kibana:
  image: docker.elastic.co/kibana/kibana:7.6.2
  ports:
    - "5601:5601"
  links:
    - elasticsearch
  labels:
    - monitor

